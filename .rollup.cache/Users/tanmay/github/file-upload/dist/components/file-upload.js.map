{"version":3,"file":"file-upload.js","sourceRoot":"","sources":["../../src/components/file-upload/components/file-upload.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use client\";\n\nimport React, { forwardRef } from \"react\";\nimport { Upload, X, File, AlertCircle } from \"lucide-react\";\nimport { cn } from \"../utils\";\nimport { useFileUpload } from \"../hooks/use-file-upload\";\nimport {\n  fileUploadVariants,\n  filePreviewVariants,\n  errorVariants,\n  uploadButtonVariants,\n  iconVariants,\n} from \"./file-upload-variants\";\nimport { ProgressBar } from \"./progress-bar\";\nimport type { FileUploadProps } from \"../types\";\nimport { formatBytes, isImageFile } from \"../utils\";\n\n/**\n * Main FileUpload component with variant support\n */\nexport const FileUpload = forwardRef<HTMLDivElement, FileUploadProps>(\n  (\n    {\n      variant = \"dropzone\",\n      size = \"md\",\n      radius = \"md\",\n      multiple = false,\n      maxFiles = 1,\n      maxSize = 10 * 1024 * 1024,\n      accept = \"*\",\n      disabled = false,\n      showPreview = true,\n      showProgress = false,\n      allowRemove = true,\n      className,\n      onFilesChange,\n      onFilesAdded,\n      onError,\n      initialFiles = [],\n      labels = {},\n      ...props\n    },\n    ref\n  ) => {\n    const defaultLabels = {\n      dropzone: \"Drop files here or click to browse\",\n      button: \"Choose Files\",\n      dragActive: \"Drop files here or click to browse\",\n      remove: \"Remove file\",\n      clear: \"Clear all files\",\n      ...labels,\n    };\n\n    const [state, actions] = useFileUpload({\n      multiple,\n      maxFiles,\n      maxSize,\n      accept,\n      initialFiles: initialFiles?.map((f) => ({\n        name: f.file.name,\n        size: f.file.size,\n        type: f.file.type,\n        url: f.preview || \"\",\n        id: f.id,\n      })),\n      onFilesChange,\n      onFilesAdded,\n    });\n\n    React.useEffect(() => {\n      if (state.errors.length > 0) {\n        onError?.(state.errors);\n      }\n    }, [state.errors, onError]);\n\n    const renderButton = () => (\n      <button\n        type=\"button\"\n        onClick={actions.openFileDialog}\n        disabled={disabled}\n        className={cn(\n          uploadButtonVariants({\n            variant: \"default\",\n            size: size === \"md\" ? \"default\" : size === \"sm\" ? \"sm\" : \"lg\",\n          }),\n          className\n        )}\n      >\n        <Upload className={iconVariants({ size: \"sm\" })} />\n        {defaultLabels.button}\n      </button>\n    );\n\n    const renderDropzone = () => (\n      <div\n        onDragEnter={actions.handleDragEnter}\n        onDragLeave={actions.handleDragLeave}\n        onDragOver={actions.handleDragOver}\n        onDrop={actions.handleDrop}\n        onClick={actions.openFileDialog}\n        data-dragging={state.isDragging || undefined}\n        className={cn(\n          fileUploadVariants({ variant, size, radius }),\n          \"data-[dragging=true]:bg-accent/50 data-[dragging=true]:border-primary transition-colors\",\n          disabled && \"opacity-50 cursor-not-allowed\",\n          className\n        )}\n      >\n        <div className=\"flex flex-col items-center gap-2\">\n          <Upload\n            className={iconVariants({ size: size === \"sm\" ? \"md\" : \"lg\" })}\n          />\n          <div className=\"text-sm text-muted-foreground\">\n            {state.isDragging\n              ? defaultLabels.dragActive\n              : defaultLabels.dropzone}\n          </div>\n          {maxSize < Infinity && (\n            <div className=\"text-xs text-muted-foreground\">\n              Max size: {formatBytes(maxSize)}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n\n    const renderPreview = () => (\n      <div\n        className={cn(fileUploadVariants({ variant, size, radius }), className)}\n      >\n        {state.files.length > 0 ? (\n          <div className=\"relative w-full h-full\">\n            {state.files[0].preview && isImageFile(state.files[0].file) ? (\n              <img\n                src={state.files[0].preview}\n                alt=\"Preview\"\n                className={cn(\n                  \"w-full h-full object-cover\",\n                  radius === \"full\" && \"rounded-full\"\n                )}\n              />\n            ) : (\n              <div className=\"flex items-center justify-center w-full h-full bg-muted\">\n                <File className={iconVariants({ size: \"lg\" })} />\n              </div>\n            )}\n            {allowRemove && (\n              <button\n                type=\"button\"\n                onClick={() => actions.removeFile(state.files[0].id)}\n                className=\"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90\"\n              >\n                <X className=\"w-3 h-3\" />\n              </button>\n            )}\n          </div>\n        ) : (\n          <div\n            onClick={actions.openFileDialog}\n            className=\"flex items-center justify-center w-full h-full cursor-pointer hover:bg-muted/50 transition-colors\"\n          >\n            <Upload className={iconVariants({ size: \"lg\" })} />\n          </div>\n        )}\n      </div>\n    );\n\n    const renderCompact = () => (\n      <button\n        type=\"button\"\n        onClick={actions.openFileDialog}\n        disabled={disabled}\n        className={cn(fileUploadVariants({ variant, size, radius }), className)}\n      >\n        <Upload className={iconVariants({ size: \"sm\" })} />\n        <span className=\"ml-2\">{defaultLabels.button}</span>\n      </button>\n    );\n\n    const renderFileList = () => {\n      if (!showPreview || state.files.length === 0) return null;\n\n      return (\n        <div className=\"mt-4 space-y-2\">\n          {state.files.map((fileWithPreview) => (\n            <div\n              key={fileWithPreview.id}\n              className={filePreviewVariants({ variant: \"list\", size })}\n            >\n              <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                {fileWithPreview.preview &&\n                isImageFile(fileWithPreview.file) ? (\n                  <img\n                    src={fileWithPreview.preview}\n                    alt=\"Preview\"\n                    className=\"w-10 h-10 object-cover rounded\"\n                  />\n                ) : (\n                  <File className={iconVariants({ size: \"md\" })} />\n                )}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium truncate\">\n                    {fileWithPreview.file.name}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {formatBytes(fileWithPreview.file.size)}\n                  </div>\n                  {showProgress && fileWithPreview.progress !== undefined && (\n                    <div className=\"mt-2\">\n                      <ProgressBar\n                        value={fileWithPreview.progress}\n                        size=\"sm\"\n                        showLabel={true}\n                        status={fileWithPreview.status}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n              {allowRemove && (\n                <button\n                  type=\"button\"\n                  onClick={() => actions.removeFile(fileWithPreview.id)}\n                  className=\"p-1 hover:bg-destructive/10 rounded\"\n                >\n                  <X className=\"w-4 h-4 text-destructive\" />\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      );\n    };\n\n    const renderErrors = () => {\n      if (state.errors.length === 0) return null;\n\n      return (\n        <div className=\"mt-2 space-y-1\">\n          {state.errors.map((error, index) => (\n            <div key={index} className={errorVariants({ variant: \"default\" })}>\n              <AlertCircle className=\"w-4 h-4 inline mr-1\" />\n              {error}\n            </div>\n          ))}\n        </div>\n      );\n    };\n\n    return (\n      <div ref={ref} {...props}>\n        <input {...actions.getInputProps()} className=\"hidden\" />\n\n        {variant === \"button\" && renderButton()}\n        {variant === \"dropzone\" && renderDropzone()}\n        {variant === \"preview\" && renderPreview()}\n        {variant === \"compact\" && renderCompact()}\n\n        {variant !== \"preview\" && renderFileList()}\n        {renderErrors()}\n      </div>\n    );\n  }\n);\n\nFileUpload.displayName = \"FileUpload\";\n"]}